var j=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var p=(t,e,r)=>(j(t,e,"read from private field"),r?r.call(t):e.get(t)),g=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Q=(t,e,r,s)=>(j(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);var m=(t,e,r)=>(j(t,e,"access private method"),r);import{c as ge,a as Re,g as C,b as R,i as b,d as $,r as $e,e as Te,t as U,M as F,S as xe,f as Ae}from"./app-DPRTKUiA.js";class X extends Error{constructor(e,r,s){const n=e.status||e.status===0?e.status:"",i=e.statusText||"",o=`${n} ${i}`.trim(),a=o?`status code ${o}`:"an unknown error";super(`Request failed with ${a}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=r,this.options=s}}class ne extends Error{constructor(e){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}}const k=t=>t!==null&&typeof t=="object",E=(...t)=>{for(const e of t)if((!k(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return J({},...t)},ie=(t={},e={})=>{const r=new globalThis.Headers(t),s=e instanceof globalThis.Headers,n=new globalThis.Headers(e);for(const[i,o]of n.entries())s&&o==="undefined"||o===void 0?r.delete(i):r.set(i,o);return r},J=(...t)=>{let e={},r={};for(const s of t)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if(k(s)){for(let[n,i]of Object.entries(s))k(i)&&n in e&&(i=J(e[n],i)),e={...e,[n]:i};k(s.headers)&&(r=ie(r,s.headers),e.headers=r)}return e},Se=(()=>{let t=!1,e=!1;const r=typeof globalThis.ReadableStream=="function",s=typeof globalThis.Request=="function";return r&&s&&(e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),qe=typeof globalThis.AbortController=="function",ve=typeof globalThis.ReadableStream=="function",Ce=typeof globalThis.FormData=="function",oe=["get","post","put","patch","head","delete"],Ee={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},I=2147483647,ae=Symbol("stop"),ke={json:!0,parseJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},Oe={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},Pe=t=>oe.includes(t)?t.toUpperCase():t,Ue=["get","put","head","delete","options","trace"],Ne=[408,413,429,500,502,503,504],ue=[413,429,503],ee={limit:2,methods:Ue,statusCodes:Ne,afterStatusCodes:ue,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},je=(t={})=>{if(typeof t=="number")return{...ee,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...ee,...t,afterStatusCodes:ue}};async function Fe(t,e,r,s){return new Promise((n,i)=>{const o=setTimeout(()=>{r&&r.abort(),i(new ne(t))},s.timeout);s.fetch(t,e).then(n).catch(i).then(()=>{clearTimeout(o)})})}async function Ie(t,{signal:e}){return new Promise((r,s)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",n,{once:!0}));function n(){clearTimeout(i),s(e.reason)}const i=setTimeout(()=>{e==null||e.removeEventListener("abort",n),r()},t)})}const Le=(t,e)=>{const r={};for(const s in e)!(s in Oe)&&!(s in ke)&&!(s in t)&&(r[s]=e[s]);return r};class O{static create(e,r){const s=new O(e,r),n=async()=>{if(typeof s._options.timeout=="number"&&s._options.timeout>I)throw new RangeError(`The \`timeout\` option cannot be greater than ${I}`);await Promise.resolve();let a=await s._fetch();for(const l of s._options.hooks.afterResponse){const u=await l(s.request,s._options,s._decorateResponse(a.clone()));u instanceof globalThis.Response&&(a=u)}if(s._decorateResponse(a),!a.ok&&s._options.throwHttpErrors){let l=new X(a,s.request,s._options);for(const u of s._options.hooks.beforeError)l=await u(l);throw l}if(s._options.onDownloadProgress){if(typeof s._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!ve)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(a.clone(),s._options.onDownloadProgress)}return a},o=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(n):n();for(const[a,l]of Object.entries(Ee))o[a]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||l);const c=(await o).clone();if(a==="json"){if(c.status===204||(await c.clone().arrayBuffer()).byteLength===0)return"";if(r.parseJson)return r.parseJson(await c.text())}return c[a]()};return o}constructor(e,r={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e;const s=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...s&&{credentials:s},...r,headers:ie(this._input.headers,r.headers),hooks:J({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},r.hooks),method:Pe(r.method??this._input.method),prefixUrl:String(r.prefixUrl||""),retry:je(r.retry),throwHttpErrors:r.throwHttpErrors!==!1,timeout:r.timeout??1e4,fetch:r.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(qe){if(this.abortController=new globalThis.AbortController,this._options.signal){const n=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(n.reason)})}this._options.signal=this.abortController.signal}if(Se&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),o=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(Ce&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(o,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(e instanceof ne)){if(e instanceof X){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const s=e.response.headers.get("Retry-After");if(s&&this._options.retry.afterStatusCodes.includes(e.response.status)){let n=Number(s);return Number.isNaN(n)?n=Date.parse(s)-Date.now():n*=1e3,this._options.retry.maxRetryAfter!==void 0&&n>this._options.retry.maxRetryAfter?0:n}if(e.response.status===413)return 0}const r=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,r)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){const s=Math.min(this._calculateRetryDelay(r),I);if(s!==0&&this._retryCount>0){await Ie(s,{signal:this._options.signal});for(const n of this._options.hooks.beforeRetry)if(await n({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===ae)return;return this._retry(e)}throw r}}async _fetch(){for(const r of this._options.hooks.beforeRequest){const s=await r(this.request,this._options);if(s instanceof Request){this.request=s;break}if(s instanceof Response)return s}const e=Le(this.request,this._options);return this._options.timeout===!1?this._options.fetch(this.request.clone(),e):Fe(this.request.clone(),e,this.abortController,this._options)}_stream(e,r){const s=Number(e.headers.get("content-length"))||0;let n=0;return e.status===204?(r&&r({percent:1,totalBytes:s,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){const o=e.body.getReader();r&&r({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array);async function a(){const{done:l,value:u}=await o.read();if(l){i.close();return}if(r){n+=u.byteLength;const c=s===0?0:n/s;r({percent:c,transferredBytes:n,totalBytes:s},u)}i.enqueue(u),await a()}await a()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}/*! MIT License © Sindre Sorhus */const H=t=>{const e=(r,s)=>O.create(r,E(t,s));for(const r of oe)e[r]=(s,n)=>O.create(s,E(t,n,{method:r}));return e.create=r=>H(E(r)),e.extend=r=>H(E(t,r)),e.stop=ae,e},He=H(),Me=He;function V(t){return t===void 0}function De(t){return t===null}function Be(t){return typeof t=="boolean"}function P(t){return t===Object(t)}function te(t){return Array.isArray(t)}function ze(t){return t instanceof Date}function le(t,e){return e?P(t)&&!V(t.uri):P(t)&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.slice=="function"}function We(t,e){return le(t,e)&&typeof t.name=="string"&&(P(t.lastModifiedDate)||typeof t.lastModified=="number")}function _(t){return V(t)?!1:t}function M(t,e,r,s){e=e||{},r=r||new FormData,e.indices=_(e.indices),e.nullsAsUndefineds=_(e.nullsAsUndefineds),e.booleansAsIntegers=_(e.booleansAsIntegers),e.allowEmptyArrays=_(e.allowEmptyArrays),e.noAttributesWithArrayNotation=_(e.noAttributesWithArrayNotation),e.noFilesWithArrayNotation=_(e.noFilesWithArrayNotation),e.dotsForObjectNotation=_(e.dotsForObjectNotation);const n=typeof r.getParts=="function";return V(t)||(De(t)?e.nullsAsUndefineds||r.append(s,""):Be(t)?e.booleansAsIntegers?r.append(s,t?1:0):r.append(s,t):te(t)?t.length?t.forEach((i,o)=>{let a=s+"["+(e.indices?o:"")+"]";(e.noAttributesWithArrayNotation||e.noFilesWithArrayNotation&&We(i,n))&&(a=s),M(i,e,r,a)}):e.allowEmptyArrays&&r.append(e.noAttributesWithArrayNotation?s:s+"[]",""):ze(t)?r.append(s,t.toISOString()):P(t)&&!le(t,n)?Object.keys(t).forEach(i=>{const o=t[i];if(te(o))for(;i.length>2&&i.lastIndexOf("[]")===i.length-2;)i=i.substring(0,i.length-2);const a=s?e.dotsForObjectNotation?s+"."+i:s+"["+i+"]":i;M(o,e,r,a)}):r.append(s,t)),r}var Je={serialize:M},Ve=class extends Error{constructor(t,e){super(e+""),this.status=t,this.value=e,this.name="TuyauHTTPError",this.value=e}};function ce(t){if(!t)return"";let e="";const r=(s,n,i=!1)=>{if(n==null)return;const o=encodeURIComponent(s),a=encodeURIComponent(n),l=`${o}${i?"[]":""}=${a}`;e+=(e?"&":"?")+l};for(const[s,n]of Object.entries(t))if(n)if(Array.isArray(n))for(const i of n)r(s,i,!0);else r(s,`${n}`);return e}function Ke(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function Ye(t){return t.replace(/^\//,"")}function Ze(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}var Ge=typeof FileList>"u",Qe=typeof navigator<"u"&&navigator.product==="ReactNative",f,T,D,re,he=(re=class{constructor(t){g(this,T);g(this,f,void 0);Q(this,f,t)}isFile(t){return Qe&&Ze(t)&&t.uri?!0:Ge?t instanceof Blob:t instanceof FileList||t instanceof File}hasFile(t){return t?Object.values(t).some(e=>Array.isArray(e)?e.some(this.isFile):this.isFile(e)):!1}then(t,e){return m(this,T,D).call(this).then(t,e)}async unwrap(){const t=await m(this,T,D).call(this);if(t.error)throw t.error;return t.data}},f=new WeakMap,T=new WeakSet,D=async function(){var u,c;let t="json",e=p(this,f).body;!(e instanceof FormData)&&this.hasFile(e)?(e=Je.serialize(e,{indices:!0}),t="body"):e instanceof FormData&&(t="body");const r=["get","head"].includes(p(this,f).method),s=r?e==null?void 0:e.query:(u=p(this,f).queryOptions)==null?void 0:u.query,n=await p(this,f).client[p(this,f).method](Ye(p(this,f).path),{searchParams:ce(s),[t]:r?void 0:e,...p(this,f).queryOptions});let i,o;const a=(c=n.headers.get("Content-Type"))==null?void 0:c.split(";")[0];a==="application/json"?i=await n.json():a==="application/octet-stream"?i=await n.arrayBuffer():i=await n.text();const l=n.status;return n.ok||(o=new Ve(n.status,i),i=void 0),{data:i,error:o,response:n,status:l}},re),x,B,A,z,se,Xe=(se=class{constructor(t,e,r){g(this,x);g(this,A);this.baseUrl=t,this.routes=e,this.client=r}$route(t,e){const r=m(this,x,B).call(this,t);return r.method.reduce((s,n)=>(s[`$${n.toLowerCase()}`]=(i,o={})=>{const a=m(this,A,z).call(this,r.path,e);return new he({body:i,path:a,method:n.toLowerCase(),client:this.client,queryOptions:o})},s),{})}$url(t,e){const r=m(this,x,B).call(this,t),s=(e==null?void 0:e.params)||{},n=m(this,A,z).call(this,r.path,s),i=new URL(n,this.baseUrl);return i.search=ce((e==null?void 0:e.query)||{}),i.toString()}$has(t){if(!t.includes("*"))return this.routes.some(r=>r.name===t);const e=new RegExp(`^${t.replace("*",".*")}$`);return this.routes.some(r=>e.test(r.name))}},x=new WeakSet,B=function(t){const e=this.routes.find(r=>r.name===t);if(!e)throw new Error(`Route ${t} not found`);return e},A=new WeakSet,z=function(t,e){let r={},s=[];if(Array.isArray(e))s=e;else{const i=Object.entries(e).map(([o,a])=>[Ke(o),a]);r=Object.fromEntries(i)}let n=0;return t.replace(/:([A-Z_a-z]+)/g,(i,o)=>{if(r[o])return r[o].toString();if(s[n])return s[n++];throw new Error(`Route ${t} is missing the ${o} parameter`)})},se),et=["get","post","put","delete","patch","head"],tt=et.map(t=>`$${t}`);function W(t){var o;const{client:e,baseUrl:r,config:s,paths:n=[]}=t,i=new Xe(r,(o=s.api)==null?void 0:o.routes,e);return new Proxy(()=>{},{get(a,l){return W({...t,paths:l==="index"?n:[...n,l]})},apply(a,l,[u,c]){const y=n.at(-1);return n.length===1&&["$has","$route","$url"].includes(y)?i[y](u,c):y==="$url"?new URL(n.join("/").replace("/$url",""),r).toString():!tt.includes(y)&&typeof u=="object"?W({...t,paths:[...n,Object.values(u)[0]]}):new he({body:u,client:e,queryOptions:c,path:n.slice(0,-1).join("/"),method:n[n.length-1].slice(1)})}})}function rt(t){const e=t.baseUrl,r=Me.create({prefixUrl:e,throwHttpErrors:!1,...t});return W({client:r,baseUrl:e,config:t})}const L=rt("http://localhost:3333");var st=U("<div><div>File Name: <!$><!/></div><div>File Size: <!$><!/>"),nt=U("<div class=container><div class=title>AdonisJS <!$><!/> x Inertia x Solid.js</div><!$><!/><input type=file><!$><!/><button>Upload File"),it=U("<ul>"),ot=U("<li>");function lt(t){const[e,r]=ge(null),[s]=Re(async()=>{const i=await L.users.$get({query:{limit:10}});if(i.error)throw i.error;return i.data}),n=()=>{const i=s.error;return(i==null?void 0:i.status)===400?i.value.message:(i==null?void 0:i.status)===502?i.value:"Unknown error"};return(()=>{var i=C(nt),o=i.firstChild,a=o.firstChild,l=a.nextSibling,[u,c]=R(l.nextSibling);u.nextSibling;var y=o.nextSibling,[S,K]=R(y.nextSibling),Y=S.nextSibling,fe=Y.nextSibling,[Z,de]=R(fe.nextSibling),pe=Z.nextSibling;return b(o,()=>t.version,u,c),b(i,$(xe,{get children(){return[$(F,{get when(){return s.loading},children:"Loading..."}),$(F,{get when(){return s.error},get children(){return n()}}),$(F,{get when(){return s()},children:d=>(()=>{var h=C(it);return b(h,()=>{var q;return(q=d())==null?void 0:q.users.map(N=>(()=>{var v=C(ot);return b(v,()=>N.name),v})())}),h})()})]}}),S,K),Y.addEventListener("change",d=>{var h;return r(((h=d.target.files)==null?void 0:h[0])||null)}),b(i,$(Ae,{get when(){return e()},get children(){var d=C(st),h=d.firstChild,q=h.firstChild,N=q.nextSibling,[v,ye]=R(N.nextSibling),G=h.nextSibling,me=G.firstChild,be=me.nextSibling,[_e,we]=R(be.nextSibling);return b(h,()=>{var w;return(w=e())==null?void 0:w.name},v,ye),b(G,()=>{var w;return(w=e())==null?void 0:w.size},_e,we),d}}),Z,de),pe.$$click=async()=>{const d=await L["simple-text"].$get();console.log(d.data==="foo");const h=await L["file-upload"].$post({file:e()});if(h.error)throw h.error},$e(),i})()}Te(["click"]);export{lt as default};
